(function(r,c){typeof exports=="object"&&typeof module<"u"?module.exports=c(require("lucide-react"),require("react"),require("react-router-dom"),require("sonner")):typeof define=="function"&&define.amd?define(["lucide-react","react","react-router-dom","sonner"],c):(r=typeof globalThis<"u"?globalThis:r||self,r.deluge=c(r.LucideReact,r.React,r.ReactRouterDOM,r.Sonner))})(this,(function(r,c,q,g){"use strict";var P={exports:{}},_={};var I;function O(){if(I)return _;I=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function l(n,d,i){var x=null;if(i!==void 0&&(x=""+i),d.key!==void 0&&(x=""+d.key),"key"in d){i={};for(var h in d)h!=="key"&&(i[h]=d[h])}else i=d;return d=i.ref,{$$typeof:t,type:n,key:x,ref:d!==void 0?d:null,props:i}}return _.Fragment=a,_.jsx=l,_.jsxs=l,_}var F;function V(){return F||(F=1,P.exports=O()),P.exports}var e=V();let k=null,y=null,J=1;const z=()=>J++,m={login:async(t,a)=>{try{console.log(`Connecting to Deluge at ${t}`),y=t;const l={method:"auth.login",params:[a],id:z()},n=await window.electronAPI.proxyRequest(`${t}/json`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(l)}),d=n.data;if(n.ok&&d&&!d.error&&d.result){if(n.headers){const i=n.headers["set-cookie"]||n.headers["Set-Cookie"];i&&(k=i.split(";")[0])}return!0}return!1}catch(l){return console.error("Deluge login error:",l),!1}},checkConnection:async()=>{if(!k){const t=await window.electronAPI.getCredentials("deluge_url"),a=await window.electronAPI.getCredentials("deluge_password");return t&&a?m.login(t,a):!1}return!0},invoke:async(t,a=[])=>{if(!y){const x=await window.electronAPI.getCredentials("deluge_url");if(x)y=x;else throw new Error("Deluge not configured")}k||await m.checkConnection();const l={method:t,params:a,id:z()},n={"Content-Type":"application/json",Accept:"application/json"};k&&(n.Cookie=k);const i=(await window.electronAPI.proxyRequest(`${y}/json`,{method:"POST",headers:n,body:JSON.stringify(l)})).data;if(i&&i.error)throw new Error(i.error.message||"RPC Error");return i?.result},getStats:async()=>{try{const t=await m.getTorrents();let a=0,l=0,n=0,d=0;return t.forEach(i=>{a+=i.download_payload_rate,l+=i.upload_payload_rate,i.state==="Paused"?d++:n++}),{downloadSpeed:Math.floor(a/1024),uploadSpeed:Math.floor(l/1024),activeTorrents:n,pausedTorrents:d}}catch(t){return console.error(t),{downloadSpeed:0,uploadSpeed:0,activeTorrents:0,pausedTorrents:0}}},getTorrents:async()=>{try{const t=["name","total_size","state","progress","download_payload_rate","upload_payload_rate","eta","save_path"],a=await m.invoke("web.update_ui",[t,{}]);return a&&a.torrents?Object.entries(a.torrents).map(([l,n])=>({id:l,name:n.name,total_size:n.total_size,state:n.state,progress:n.progress,download_payload_rate:n.download_payload_rate,upload_payload_rate:n.upload_payload_rate,eta:n.eta,save_path:n.save_path})):[]}catch(t){return console.error("Error fetching torrents:",t),[]}},addMagnet:async t=>{try{if(!y)throw new Error("Not connected");return await m.invoke("core.add_torrent_magnet",[t,{}]),!0}catch(a){return console.error("Failed to add magnet",a),!1}},addTorrentFile:async(t,a)=>{try{if(!y)throw new Error("Not connected");return await m.invoke("core.add_torrent_file",[t,a,{}]),!0}catch(l){return console.error("Failed to add torrent file",l),!1}},removeTorrent:async(t,a=!1)=>{try{return await m.invoke("core.remove_torrent",[t,a]),!0}catch(l){return console.error(l),!1}},pauseTorrent:async t=>{try{return await m.invoke("core.pause_torrent",[[t]]),!0}catch{return!1}},resumeTorrent:async t=>{try{return await m.invoke("core.resume_torrent",[[t]]),!0}catch{return!1}},checkHealth:async()=>{try{return await m.checkConnection()}catch{return!1}}};function $(t,a=2){if(!+t)return"0 B";const l=1024,n=a<0?0:a,d=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(t)/Math.log(l));return`${parseFloat((t/Math.pow(l,i)).toFixed(n))} ${d[i]}`}function T(t){return`${$(t)}/s`}function G(t){if(t===0)return"-";const a=Math.floor(t/3600),l=Math.floor(t%3600/60);return a>0?`${a}h ${l}m`:`${l}m`}function R(){const t=q.useNavigate(),[a,l]=c.useState([]),[n,d]=c.useState(null),[i,x]=c.useState(""),[h,v]=c.useState(!1),[f,N]=c.useState([]),[b,S]=c.useState(!1),[u,w]=c.useState("all"),[j,E]=c.useState(""),[Y,L]=c.useState(!1),U=c.useRef(null);c.useEffect(()=>{(async()=>await window.electronAPI.getCredentials("deluge_configured")?(d(!0),C()):(d(!1),setTimeout(()=>{t("/settings",{state:{section:"deluge"}})},2e3)))()},[t]),c.useEffect(()=>{if(!n)return;const s=setInterval(C,2e3);return()=>clearInterval(s)},[n]);const C=async()=>{try{const s=await m.getTorrents();l(s)}catch(s){console.error("Error loading torrents",s)}},H=async()=>{L(!0),await C(),setTimeout(()=>L(!1),500)},M=async(s,o,p)=>{try{s==="pause"&&(await m.pauseTorrent(o),g.toast.success(`Torrent mis en pause : ${p}`)),s==="resume"&&(await m.resumeTorrent(o),g.toast.success(`Torrent repris : ${p}`)),s==="remove"&&confirm(`Voulez-vous vraiment supprimer "${p}" ?`)&&(await m.removeTorrent(o),g.toast.success(`Torrent supprimé : ${p}`)),C()}catch{g.toast.error("Une erreur est survenue lors de l'action")}},X=async()=>{const s=a.filter(o=>o.progress===100);if(s.length===0){g.toast.info("Aucun torrent terminé à supprimer");return}if(confirm(`Voulez-vous supprimer ${s.length} torrents terminés ?`)){let o=0;for(const p of s)await m.removeTorrent(p.id),o++;g.toast.success(`${o} torrents supprimés`),C()}},Z=s=>{s.target.files&&N(o=>[...o,...Array.from(s.target.files)])},Q=s=>{s.preventDefault(),S(!0)},K=s=>{s.preventDefault(),S(!1)},ee=s=>{if(s.preventDefault(),S(!1),s.dataTransfer.files){const o=Array.from(s.dataTransfer.files).filter(p=>p.name.endsWith(".torrent"));o.length>0&&(N(p=>[...p,...o]),g.toast.success(`${o.length} fichier(s) ajouté(s)`))}},se=s=>{N(o=>o.filter((p,A)=>A!==s))},te=async()=>{let s=0;try{if(i&&(await m.addMagnet(i),x(""),s++),f.length>0){for(const o of f){const p=new FileReader;p.onload=async()=>{const A=p.result.split(",")[1];await m.addTorrentFile(o.name,A)},p.readAsDataURL(o),s++}N([])}s>0&&(v(!1),g.toast.success("Torrents ajoutés avec succès"),setTimeout(C,1e3))}catch(o){g.toast.error("Erreur lors de l'ajout des torrents"),console.error(o)}},B=c.useMemo(()=>a.filter(s=>s.name.toLowerCase().includes(j.toLowerCase())?u==="all"?!0:u==="downloading"?s.state==="Downloading":u==="seeding"?s.state==="Seeding":u==="paused"?s.state==="Paused":u==="error"?s.state==="Error":!0:!1),[a,u,j]),D={down:a.reduce((s,o)=>s+o.download_payload_rate,0),up:a.reduce((s,o)=>s+o.upload_payload_rate,0),active:a.filter(s=>s.state==="Downloading"||s.state==="Seeding").length,totalSize:a.reduce((s,o)=>s+o.total_size,0)},re=s=>{switch(s){case"Downloading":return"bg-blue-500/10 text-blue-500 border-blue-500/20";case"Seeding":return"bg-green-500/10 text-green-500 border-green-500/20";case"Paused":return"bg-yellow-500/10 text-yellow-500 border-yellow-500/20";case"Error":return"bg-red-500/10 text-red-500 border-red-500/20";default:return"bg-muted text-muted-foreground border-muted"}};return n===!1?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(r.AlertCircle,{className:"mx-auto h-12 w-12 text-yellow-500"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Module non configuré"}),e.jsx("p",{className:"text-muted-foreground",children:"Redirection vers les paramètres..."})]})]})}):n===null?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs("div",{className:"space-y-6 h-full flex flex-col p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(r.Download,{className:"h-7 w-7 text-primary"}),"Deluge"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Gestionnaire de téléchargements"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:H,className:`p-2 rounded-md hover:bg-muted transition-colors ${Y?"animate-spin":""}`,title:"Actualiser",children:e.jsx(r.RefreshCw,{className:"h-5 w-5"})}),e.jsxs("button",{onClick:X,className:"flex items-center gap-2 rounded-md bg-destructive/10 px-4 py-2 text-sm font-medium text-destructive hover:bg-destructive/20 border border-destructive/20 transition-colors",title:"Supprimer les torrents terminés",children:[e.jsx(r.Trash2,{className:"h-4 w-4"})," ",e.jsx("span",{className:"hidden md:inline",children:"Nettoyer"})]}),e.jsxs("button",{onClick:()=>v(!0),className:"flex items-center gap-2 rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90 shadow-sm transition-colors",children:[e.jsx(r.Plus,{className:"h-4 w-4"})," Ajouter"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-xl border bg-card text-card-foreground shadow-sm relative overflow-hidden group",children:[e.jsx("div",{className:"absolute right-0 top-0 h-full w-1 bg-gradient-to-b from-green-500 to-transparent opacity-50"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-1",children:[e.jsx(r.Download,{className:"h-4 w-4 text-green-500"})," Vitesse DL"]}),e.jsx("div",{className:"text-2xl font-bold font-mono tracking-tight",children:T(D.down)})]}),e.jsxs("div",{className:"p-4 rounded-xl border bg-card text-card-foreground shadow-sm relative overflow-hidden group",children:[e.jsx("div",{className:"absolute right-0 top-0 h-full w-1 bg-gradient-to-b from-blue-500 to-transparent opacity-50"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-1",children:[e.jsx(r.Upload,{className:"h-4 w-4 text-blue-500"})," Vitesse UL"]}),e.jsx("div",{className:"text-2xl font-bold font-mono tracking-tight",children:T(D.up)})]}),e.jsxs("div",{className:"p-4 rounded-xl border bg-card text-card-foreground shadow-sm relative overflow-hidden group",children:[e.jsx("div",{className:"absolute right-0 top-0 h-full w-1 bg-gradient-to-b from-purple-500 to-transparent opacity-50"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-1",children:[e.jsx(r.Play,{className:"h-4 w-4 text-purple-500"})," Actifs"]}),e.jsxs("div",{className:"text-2xl font-bold",children:[D.active," ",e.jsxs("span",{className:"text-sm font-normal text-muted-foreground",children:["/ ",a.length]})]})]}),e.jsxs("div",{className:"p-4 rounded-xl border bg-card text-card-foreground shadow-sm relative overflow-hidden group",children:[e.jsx("div",{className:"absolute right-0 top-0 h-full w-1 bg-gradient-to-b from-orange-500 to-transparent opacity-50"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-1",children:[e.jsx(r.HardDrive,{className:"h-4 w-4 text-orange-500"})," Total"]}),e.jsx("div",{className:"text-2xl font-bold",children:$(D.totalSize)})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between bg-card p-2 rounded-lg border shadow-sm",children:[e.jsx("div",{className:"flex items-center gap-1 overflow-x-auto w-full md:w-auto p-1",children:["all","downloading","seeding","paused","error"].map(s=>e.jsx("button",{onClick:()=>w(s),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors capitalize whitespace-nowrap ${u===s?"bg-primary text-primary-foreground shadow-sm":"text-muted-foreground hover:bg-muted hover:text-foreground"}`,children:s==="all"?"Tous":s},s))}),e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx(r.Search,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx("input",{type:"text",placeholder:"Rechercher...",value:j,onChange:s=>E(s.target.value),className:"w-full pl-9 pr-4 py-2 text-sm rounded-md border bg-background focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),e.jsx("div",{className:"flex-1 rounded-xl border bg-card text-card-foreground shadow-sm overflow-hidden flex flex-col",children:e.jsx("div",{className:"overflow-x-auto flex-1",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-muted/50 text-xs uppercase font-medium text-muted-foreground sticky top-0 z-10 backdrop-blur-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left w-[30%]",children:"Nom"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left w-[20%]",children:"Progression"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Vitesse"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Temps"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Actions"})]})}),e.jsxs("tbody",{className:"divide-y",children:[B.map(s=>e.jsxs("tr",{className:"hover:bg-muted/30 transition-colors group",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${s.progress===100?"bg-green-500/10 text-green-500":"bg-primary/10 text-primary"}`,children:s.progress===100?e.jsx(r.CheckCircle2,{className:"h-4 w-4"}):e.jsx(r.File,{className:"h-4 w-4"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"font-medium truncate max-w-[200px] md:max-w-[300px]",title:s.name,children:s.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:$(s.total_size)})]})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${re(s.state)}`,children:s.state})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-500 rounded-full ${s.state==="Paused"?"bg-yellow-500":s.state==="Error"?"bg-destructive":s.progress===100?"bg-green-500":"bg-primary"}`,style:{width:`${s.progress}%`}})}),e.jsx("div",{className:"flex justify-between text-xs text-muted-foreground",children:e.jsxs("span",{children:[s.progress.toFixed(1),"%"]})})]})}),e.jsx("td",{className:"px-4 py-3 font-mono text-xs",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[s.download_payload_rate>0&&e.jsxs("span",{className:"text-green-600 dark:text-green-400 flex items-center gap-1",children:[e.jsx(r.ArrowDown,{className:"h-3 w-3"})," ",T(s.download_payload_rate)]}),s.upload_payload_rate>0&&e.jsxs("span",{className:"text-blue-600 dark:text-blue-400 flex items-center gap-1",children:[e.jsx(r.ArrowUp,{className:"h-3 w-3"})," ",T(s.upload_payload_rate)]}),s.download_payload_rate===0&&s.upload_payload_rate===0&&e.jsx("span",{className:"text-muted-foreground",children:"-"})]})}),e.jsx("td",{className:"px-4 py-3 text-muted-foreground text-xs",children:s.eta>0?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(r.Clock,{className:"h-3 w-3"}),G(s.eta)]}):"-"}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.state==="Paused"?e.jsx("button",{onClick:()=>M("resume",s.id,s.name),className:"p-1.5 hover:bg-green-500/10 text-green-500 rounded-md transition-colors",title:"Reprendre",children:e.jsx(r.Play,{className:"h-4 w-4"})}):e.jsx("button",{onClick:()=>M("pause",s.id,s.name),className:"p-1.5 hover:bg-yellow-500/10 text-yellow-500 rounded-md transition-colors",title:"Pause",children:e.jsx(r.Pause,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>M("remove",s.id,s.name),className:"p-1.5 hover:bg-destructive/10 text-destructive rounded-md transition-colors",title:"Supprimer",children:e.jsx(r.Trash2,{className:"h-4 w-4"})})]})})]},s.id)),B.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[e.jsx(r.Search,{className:"h-8 w-8 opacity-50"}),e.jsx("p",{children:"Aucun torrent trouvé"})]})})})]})]})})}),h&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"w-full max-w-lg rounded-xl border bg-background p-6 shadow-2xl scale-100 animate-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Ajouter des torrents"}),e.jsx("button",{onClick:()=>v(!1),className:"p-1 hover:bg-muted rounded-full transition-colors",children:e.jsx(r.X,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Lien Magnet"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:i,onChange:s=>x(s.target.value),className:"w-full pl-9 rounded-md border bg-background px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"magnet:?xt=urn:btih:..."}),e.jsx(r.Download,{className:"absolute left-3 top-2.5 h-4 w-4 text-muted-foreground"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"OU"})})]}),e.jsxs("div",{className:`border-2 border-dashed rounded-xl p-8 text-center cursor-pointer transition-all duration-200 ${b?"border-primary bg-primary/5 scale-[1.02]":"border-muted-foreground/25 hover:border-primary/50 hover:bg-muted/50"}`,onDragOver:Q,onDragLeave:K,onDrop:ee,onClick:()=>U.current?.click(),children:[e.jsx("input",{type:"file",ref:U,className:"hidden",multiple:!0,accept:".torrent",onChange:Z}),e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-primary/10 rounded-full",children:e.jsx(r.File,{className:"h-8 w-8 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Glissez vos fichiers .torrent ici"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"ou cliquez pour parcourir"})]})]})]}),f.length>0&&e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto pr-2 custom-scrollbar",children:f.map((s,o)=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-md bg-muted/50 text-sm group",children:[e.jsxs("div",{className:"flex items-center gap-2 truncate",children:[e.jsx(r.File,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"truncate",children:s.name})]}),e.jsx("button",{onClick:()=>se(o),className:"text-muted-foreground hover:text-destructive opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(r.X,{className:"h-4 w-4"})})]},o))})]}),e.jsxs("div",{className:"mt-8 flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>{v(!1),x(""),N([])},className:"rounded-md border px-4 py-2 text-sm font-medium hover:bg-muted transition-colors",children:"Annuler"}),e.jsx("button",{onClick:te,disabled:!i&&f.length===0,className:"rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90 disabled:opacity-50 shadow-sm transition-all",children:"Ajouter"})]})]})})]})}function W(){const[t,a]=c.useState(!1),[l,n]=c.useState("http://localhost:8112"),[d,i]=c.useState(""),[x,h]=c.useState("idle"),[v,f]=c.useState(""),[N,b]=c.useState(!1);c.useEffect(()=>{(async()=>{const w=await window.electronAPI.getCredentials("deluge_url"),j=await window.electronAPI.getCredentials("deluge_password"),E=await window.electronAPI.getCredentials("deluge_configured");w&&n(w),j&&i(j),E==="true"&&b(!0)})()},[]);const S=async()=>{h("loading"),f("");try{let u=l.trim();!u.startsWith("http://")&&!u.startsWith("https://")&&(u=`http://${u}`);let w=await m.login(u,d);if(!w&&l.trim()===u.replace("http://","")){const j=`https://${l.trim()}`;w=await m.login(j,d),w&&(u=j)}w?(n(u),await window.electronAPI.saveCredentials("deluge_url",u),await window.electronAPI.saveCredentials("deluge_password",d),await window.electronAPI.saveCredentials("deluge_configured","true"),h("success"),f("Connexion réussie et configuration sauvegardée"),b(!0)):(h("error"),f("Échec de la connexion. Vérifiez l'URL et le mot de passe."),b(!1))}catch{h("error"),f("Erreur lors du test de connexion"),b(!1)}};return t?e.jsxs("div",{className:"rounded-lg border bg-card shadow-sm overflow-hidden transition-all",children:[e.jsxs("div",{onClick:()=>a(!1),className:"flex items-center justify-between p-4 border-b bg-muted/30 cursor-pointer hover:bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:e.jsx(r.Download,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Deluge"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Connexion au client torrent"})]})]}),e.jsx(r.ChevronDown,{className:"h-5 w-5 text-muted-foreground"})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"URL de Deluge"}),e.jsx("input",{type:"text",value:l,onChange:u=>n(u.target.value),className:"w-full rounded-md border bg-background px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"http://localhost:8112"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Mot de passe"}),e.jsx("input",{type:"password",value:d,onChange:u=>i(u.target.value),className:"w-full rounded-md border bg-background px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Votre mot de passe Deluge"})]}),v&&e.jsxs("div",{className:`flex items-center gap-2 rounded-md p-3 text-sm ${x==="success"?"bg-green-500/10 text-green-500":"bg-destructive/10 text-destructive"}`,children:[x==="success"?e.jsx(r.Check,{className:"h-4 w-4"}):e.jsx(r.AlertCircle,{className:"h-4 w-4"}),v]}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsxs("button",{onClick:S,disabled:x==="loading",className:"flex items-center gap-2 rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90 disabled:opacity-50",children:[x==="loading"?e.jsx(r.Loader2,{className:"h-4 w-4 animate-spin"}):e.jsx(r.Save,{className:"h-4 w-4"}),"Tester & Sauvegarder"]})})]})]}):e.jsxs("div",{onClick:()=>a(!0),className:"flex items-center justify-between rounded-lg border bg-card p-4 shadow-sm hover:bg-accent/50 cursor-pointer transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:e.jsx(r.Download,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Deluge"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Configuration de la connexion au client Deluge"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[N?e.jsxs("div",{className:"flex items-center gap-2 text-green-500 text-sm font-medium",children:[e.jsx(r.Check,{className:"h-4 w-4"})," Connecté"]}):e.jsx("div",{className:"flex items-center gap-2 text-muted-foreground text-sm",children:"Non connecté"}),e.jsx(r.ChevronRight,{className:"h-5 w-5 text-muted-foreground"})]})]})}return{manifest:{id:"deluge",name:"Deluge",version:"1.0.1",description:"Gestionnaire de téléchargements BitTorrent",author:"MG Tools Core",minAppVersion:"0.1.0"},routes:[{path:"/deluge",element:e.jsx(R,{})}],sidebarItems:[{id:"deluge",label:"Deluge",icon:r.Download,path:"/deluge",order:1}],settings:W,services:[{id:"download",implementation:m}]}}));
