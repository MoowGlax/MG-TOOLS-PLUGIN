(function(u,a){typeof exports=="object"&&typeof module<"u"?module.exports=a(require("react"),require("lucide-react"),require("sonner"),require("react-router-dom")):typeof define=="function"&&define.amd?define(["react","lucide-react","sonner","react-router-dom"],a):(u=typeof globalThis<"u"?globalThis:u||self,u.series=a(u.React,u.LucideReact,u.Sonner,u.ReactRouterDOM))})(this,(function(u,a,M,J){"use strict";var R={exports:{}},A={};var K;function re(){if(K)return A;K=1;var t=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function n(i,o,m){var x=null;if(m!==void 0&&(x=""+m),o.key!==void 0&&(x=""+o.key),"key"in o){m={};for(var v in o)v!=="key"&&(m[v]=o[v])}else m=o;return o=m.ref,{$$typeof:t,type:i,key:x,ref:o!==void 0?o:null,props:m}}return A.Fragment=r,A.jsx=n,A.jsxs=n,A}var O={};var X;function ae(){return X||(X=1,process.env.NODE_ENV!=="production"&&(function(){function t(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===ve?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case S:return"Fragment";case d:return"Profiler";case C:return"StrictMode";case pe:return"Suspense";case xe:return"SuspenseList";case ge:return"Activity"}if(typeof s=="object")switch(typeof s.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),s.$$typeof){case j:return"Portal";case I:return s.displayName||"Context";case E:return(s._context.displayName||"Context")+".Consumer";case U:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case he:return l=s.displayName||null,l!==null?l:t(s.type)||"Memo";case W:l=s._payload,s=s._init;try{return t(s(l))}catch{}}return null}function r(s){return""+s}function n(s){try{r(s);var l=!1}catch{l=!0}if(l){l=console;var p=l.error,h=typeof Symbol=="function"&&Symbol.toStringTag&&s[Symbol.toStringTag]||s.constructor.name||"Object";return p.call(l,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",h),r(s)}}function i(s){if(s===S)return"<>";if(typeof s=="object"&&s!==null&&s.$$typeof===W)return"<...>";try{var l=t(s);return l?"<"+l+">":"<...>"}catch{return"<...>"}}function o(){var s=B.A;return s===null?null:s.getOwner()}function m(){return Error("react-stack-top-frame")}function x(s){if(Z.call(s,"key")){var l=Object.getOwnPropertyDescriptor(s,"key").get;if(l&&l.isReactWarning)return!1}return s.key!==void 0}function v(s,l){function p(){q||(q=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",l))}p.isReactWarning=!0,Object.defineProperty(s,"key",{get:p,configurable:!0})}function b(){var s=t(this.type);return $[s]||($[s]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),s=this.props.ref,s!==void 0?s:null}function c(s,l,p,h,F,V){var g=p.ref;return s={$$typeof:k,type:s,key:l,props:p,_owner:h},(g!==void 0?g:null)!==null?Object.defineProperty(s,"ref",{enumerable:!1,get:b}):Object.defineProperty(s,"ref",{enumerable:!1,value:null}),s._store={},Object.defineProperty(s._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(s,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(s,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:F}),Object.defineProperty(s,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:V}),Object.freeze&&(Object.freeze(s.props),Object.freeze(s)),s}function N(s,l,p,h,F,V){var g=l.children;if(g!==void 0)if(h)if(be(g)){for(h=0;h<g.length;h++)f(g[h]);Object.freeze&&Object.freeze(g)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else f(g);if(Z.call(l,"key")){g=t(s);var P=Object.keys(l).filter(function(je){return je!=="key"});h=0<P.length?"{key: someKey, "+P.join(": ..., ")+": ...}":"{key: someKey}",te[g+h]||(P=0<P.length?"{"+P.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,h,g,P,g),te[g+h]=!0)}if(g=null,p!==void 0&&(n(p),g=""+p),x(l)&&(n(l.key),g=""+l.key),"key"in l){p={};for(var z in l)z!=="key"&&(p[z]=l[z])}else p=l;return g&&v(p,typeof s=="function"?s.displayName||s.name||"Unknown":s),c(s,g,p,o(),F,V)}function f(s){y(s)?s._store&&(s._store.validated=1):typeof s=="object"&&s!==null&&s.$$typeof===W&&(s._payload.status==="fulfilled"?y(s._payload.value)&&s._payload.value._store&&(s._payload.value._store.validated=1):s._store&&(s._store.validated=1))}function y(s){return typeof s=="object"&&s!==null&&s.$$typeof===k}var _=u,k=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),E=Symbol.for("react.consumer"),I=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),pe=Symbol.for("react.suspense"),xe=Symbol.for("react.suspense_list"),he=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),ge=Symbol.for("react.activity"),ve=Symbol.for("react.client.reference"),B=_.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=Object.prototype.hasOwnProperty,be=Array.isArray,G=console.createTask?console.createTask:function(){return null};_={react_stack_bottom_frame:function(s){return s()}};var q,$={},ee=_.react_stack_bottom_frame.bind(_,m)(),se=G(i(m)),te={};O.Fragment=S,O.jsx=function(s,l,p){var h=1e4>B.recentlyCreatedOwnerStacks++;return N(s,l,p,!1,h?Error("react-stack-top-frame"):ee,h?G(i(s)):se)},O.jsxs=function(s,l,p){var h=1e4>B.recentlyCreatedOwnerStacks++;return N(s,l,p,!0,h?Error("react-stack-top-frame"):ee,h?G(i(s)):se)}})()),O}var H;function ne(){return H||(H=1,process.env.NODE_ENV==="production"?R.exports=re():R.exports=ae()),R.exports}var e=ne();let D="";const T={init:async()=>{D=await window.electronAPI.getCredentials("tmdb_apikey")||""},testConnection:async t=>{try{return(await(await fetch(`https://api.themoviedb.org/3/authentication/token/new?api_key=${t}`)).json()).success===!0}catch(r){return console.error("TMDB connection test failed",r),!1}},search:async t=>{if(await T.init(),!D)return[];try{return(await(await fetch(`https://api.themoviedb.org/3/search/tv?api_key=${D}&language=fr-FR&query=${encodeURIComponent(t)}&page=1&include_adult=false`)).json()).results||[]}catch(r){return console.error("TMDB search failed",r),[]}},getDetails:async t=>{if(await T.init(),!D)return null;try{return await(await fetch(`https://api.themoviedb.org/3/tv/${t}?api_key=${D}&language=fr-FR`)).json()}catch(r){return console.error("TMDB details failed",r),null}}},L={testPushover:async(t,r)=>{try{const n=new FormData;return n.append("token",r),n.append("user",t),n.append("message","Test de notification MG Tools"),n.append("title","MG Tools"),(await(await fetch("https://api.pushover.net/1/messages.json",{method:"POST",body:n})).json()).status===1}catch(n){return console.error("Pushover test failed",n),!1}},testDiscord:async t=>{try{return(await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:"Test de notification MG Tools",username:"MG Tools"})})).ok}catch(r){return console.error("Discord webhook test failed",r),!1}},sendNotification:async(t,r)=>{const n=await window.electronAPI.getCredentials("pushover_user"),i=await window.electronAPI.getCredentials("pushover_token"),o=await window.electronAPI.getCredentials("discord_webhook");if(n&&i)try{const m=new FormData;m.append("token",i),m.append("user",n),m.append("message",r),m.append("title",t),fetch("https://api.pushover.net/1/messages.json",{method:"POST",body:m}).catch(console.error)}catch(m){console.error(m)}if(o)try{fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({embeds:[{title:t,description:r,color:65280,footer:{text:"MG Tools"},timestamp:new Date().toISOString()}]})}).catch(console.error)}catch(m){console.error(m)}}},Q="favorite_series",oe="mg_tools_favorite_series",w={getFavorites:async()=>{const t=await window.electronAPI.getData(Q);let r=Array.isArray(t)?t:[];if(r.length===0){const n=localStorage.getItem(oe);if(n)try{r=JSON.parse(n),await w.saveFavorites(r)}catch{r=[]}else r=[]}return r},saveFavorites:async t=>{await window.electronAPI.saveData(Q,t)},addFavorite:async t=>{const r=await w.getFavorites();r.find(n=>n.id===t)||(r.push({id:t}),await w.saveFavorites(r))},removeFavorite:async t=>{const n=(await w.getFavorites()).filter(i=>i.id!==t);await w.saveFavorites(n)},getFavoritesDetails:async()=>{const r=(await w.getFavorites()).map(i=>T.getDetails(i.id));return(await Promise.all(r)).filter(i=>i!==null)},checkStatusChanges:async()=>{const t=await w.getFavorites();let r=!1;const n=await Promise.all(t.map(async i=>{const o=await T.getDetails(i.id);return o?i.lastStatus?(i.lastStatus!==o.status&&(await L.sendNotification(`Changement de statut : ${o.name}`,`La série ${o.name} est passée de "${i.lastStatus}" à "${o.status}".`),i.lastStatus=o.status,i.name=o.name,r=!0),i.name||(i.name=o.name,r=!0),i):(i.lastStatus!==o.status&&(i.lastStatus=o.status,i.name=o.name,r=!0),i):i}));return r&&(await w.saveFavorites(n),localStorage.setItem("series_has_updates","true")),r},hasUpdates:()=>localStorage.getItem("series_has_updates")==="true",clearUpdates:()=>{localStorage.removeItem("series_has_updates")}},Y=t=>({Ended:"Terminée","Returning Series":"En cours",Canceled:"Annulée","In Production":"En production",Pilot:"Pilote",Planned:"Programmée"})[t]||t,ie=[{id:"all",label:"Toutes"},{id:"returning",label:"En cours"},{id:"ended",label:"Terminées"},{id:"planned",label:"Programmées"}];function le(){const t=J.useNavigate(),[r,n]=u.useState([]),[i,o]=u.useState(!0),[m,x]=u.useState(!1),[v,b]=u.useState(null),[c,N]=u.useState("all"),[f,y]=u.useState(null),[_,k]=u.useState(!1),j=async(d=!0)=>{d?o(!0):k(!0);try{if(await T.init(),!await window.electronAPI.getCredentials("tmdb_apikey")){b(!1),o(!1),k(!1);return}b(!0);const I=await w.getFavoritesDetails();n(I)}catch{M.toast.error("Erreur lors du chargement des séries")}finally{o(!1),k(!1)}};u.useEffect(()=>{j(),w.clearUpdates()},[]);const S=async(d,E)=>{confirm(`Supprimer ${E} des favoris ?`)&&(await w.removeFavorite(d),n(I=>I.filter(U=>U.id!==d)),M.toast.success(`${E} retiré des favoris`),f?.id===d&&y(null))},C=r.filter(d=>c==="all"?!0:c==="ended"?d.status==="Ended"||d.status==="Canceled":c==="returning"?d.status==="Returning Series":c==="planned"?d.status==="Planned"||d.status==="In Production":!0);return e.jsxs("div",{className:"space-y-6 h-full flex flex-col",children:[e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(a.Clapperboard,{className:"h-6 w-6"}),"Mes Séries"]}),e.jsx("span",{className:"bg-muted px-2 py-0.5 rounded-full text-xs font-medium text-muted-foreground",children:r.length})]}),e.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2 md:pb-0",children:[e.jsx("div",{className:"flex bg-muted p-1 rounded-lg mr-2",children:ie.map(d=>e.jsx("button",{onClick:()=>N(d.id),className:`px-3 py-1 text-sm font-medium rounded-md transition-all ${c===d.id?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:d.label},d.id))}),e.jsx("button",{onClick:()=>j(!1),disabled:_,className:`p-2 rounded-md hover:bg-muted transition-colors ${_?"animate-spin":""}`,title:"Rafraîchir",children:e.jsx(a.RefreshCw,{className:"h-4 w-4"})}),e.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-2 rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90 whitespace-nowrap",children:[e.jsx(a.Plus,{className:"h-4 w-4"})," Ajouter"]})]})]}),e.jsx("div",{className:"flex-1 overflow-auto",children:i?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx(a.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):v===!1?e.jsxs("div",{className:"flex h-full flex-col items-center justify-center text-muted-foreground gap-4",children:[e.jsx(a.Clapperboard,{className:"h-16 w-16 opacity-20"}),e.jsx("p",{children:"La clé API TMDB n'est pas configurée."}),e.jsxs("button",{onClick:()=>t("/settings",{state:{section:"tmdb"}}),className:"flex items-center gap-2 rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90",children:[e.jsx(a.Settings,{className:"h-4 w-4"})," Configurer TMDB"]})]}):C.length===0?e.jsxs("div",{className:"flex h-full flex-col items-center justify-center text-muted-foreground gap-4",children:[e.jsx(a.Clapperboard,{className:"h-16 w-16 opacity-20"}),e.jsx("p",{children:r.length===0?"Aucune série suivie pour le moment.":"Aucune série ne correspond à ce filtre."}),r.length===0&&e.jsx("button",{onClick:()=>x(!0),className:"text-primary hover:underline",children:"Ajouter ma première série"})]}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-6",children:C.map(d=>e.jsxs("div",{onClick:()=>y(d),className:"group relative aspect-[2/3] bg-muted rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-all cursor-pointer border border-transparent hover:border-primary/50",children:[d.poster_path?e.jsx("img",{src:`https://image.tmdb.org/t/p/w500${d.poster_path}`,alt:d.name,className:"w-full h-full object-cover transition-transform group-hover:scale-105"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-muted text-muted-foreground",children:e.jsx(a.Clapperboard,{className:"h-12 w-12"})}),e.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex flex-col justify-end p-4",children:[e.jsx("h3",{className:"text-white font-bold truncate",children:d.name}),e.jsxs("div",{className:"text-white/80 text-xs flex flex-col gap-1 mt-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(a.Star,{className:"h-3 w-3 text-yellow-400 fill-yellow-400"}),e.jsx("span",{children:d.vote_average.toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(a.Info,{className:"h-3 w-3"}),e.jsx("span",{children:Y(d.status)})]})]})]}),e.jsx("div",{className:"absolute top-2 right-2 px-2 py-1 rounded bg-black/60 backdrop-blur-sm text-[10px] font-medium text-white",children:d.next_episode_to_air?"Nouveau":Y(d.status)})]},d.id))})}),m&&e.jsx(de,{onClose:()=>x(!1),onAdd:async d=>{await w.addFavorite(d.id),j(!1),x(!1),M.toast.success(`${d.name} ajouté aux favoris`)}}),f&&e.jsx(ce,{show:f,onClose:()=>y(null),onRemove:()=>S(f.id,f.name)})]})}function ce({show:t,onClose:r,onRemove:n}){const i=J.useNavigate(),o=()=>{i("/prowlarr",{state:{search:t.name}})};return e.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-card border shadow-2xl rounded-xl w-full max-w-4xl max-h-[90vh] flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"relative h-48 md:h-64 bg-muted shrink-0",children:[t.backdrop_path?e.jsx("img",{src:`https://image.tmdb.org/t/p/original${t.backdrop_path}`,alt:"",className:"w-full h-full object-cover opacity-50"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-primary/20 to-background"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-card to-transparent"}),e.jsx("button",{onClick:r,className:"absolute top-4 right-4 z-10 p-2 bg-black/20 hover:bg-black/40 text-white rounded-full backdrop-blur-md transition-colors cursor-pointer",children:e.jsx(a.X,{className:"h-5 w-5"})}),e.jsxs("div",{className:"absolute bottom-0 left-0 p-6 flex items-end gap-6 w-full",children:[e.jsx("div",{className:"hidden md:block w-32 aspect-[2/3] rounded-lg overflow-hidden shadow-lg border-2 border-card bg-muted shrink-0 translate-y-8",children:t.poster_path&&e.jsx("img",{src:`https://image.tmdb.org/t/p/w500${t.poster_path}`,alt:"",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0 pb-2",children:[e.jsx("h2",{className:"text-3xl font-bold truncate text-foreground shadow-black drop-shadow-md",children:t.name}),e.jsxs("div",{className:"flex items-center gap-4 text-sm font-medium text-muted-foreground mt-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(a.Star,{className:"h-4 w-4 text-yellow-500 fill-yellow-500"}),t.vote_average.toFixed(1)]}),e.jsx("span",{children:"•"}),e.jsx("span",{children:t.first_air_date.split("-")[0]}),e.jsx("span",{children:"•"}),e.jsx("span",{className:t.status==="Ended"?"text-red-500":"text-green-500",children:Y(t.status)})]})]})]})]}),e.jsx("div",{className:"flex-1 overflow-auto p-6 pt-10 md:pt-6",children:e.jsxs("div",{className:"grid md:grid-cols-[1fr_300px] gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Synopsis"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:t.overview||"Aucun résumé disponible en français."})]}),t.next_episode_to_air&&e.jsxs("div",{className:"bg-primary/5 border border-primary/10 rounded-lg p-4 flex items-start gap-4",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-full shrink-0",children:e.jsx(a.Calendar,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-primary",children:"Prochain épisode"}),e.jsxs("p",{className:"text-sm mt-1",children:["S",t.next_episode_to_air.season_number,"E",t.next_episode_to_air.episode_number," : ",t.next_episode_to_air.name]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Diffusé le ",new Date(t.next_episode_to_air.air_date).toLocaleDateString("fr-FR",{dateStyle:"long"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:t.number_of_seasons}),e.jsx("div",{className:"text-xs text-muted-foreground uppercase tracking-wider",children:"Saisons"})]}),e.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:t.number_of_episodes}),e.jsx("div",{className:"text-xs text-muted-foreground uppercase tracking-wider",children:"Épisodes"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:o,className:"w-full flex items-center justify-center gap-2 bg-primary text-primary-foreground py-3 px-4 rounded-lg font-medium hover:bg-primary/90 transition-colors shadow-sm",children:[e.jsx(a.Search,{className:"h-4 w-4"}),"Rechercher sur Prowlarr"]}),e.jsxs("a",{href:`https://www.themoviedb.org/tv/${t.id}`,target:"_blank",rel:"noreferrer",className:"w-full flex items-center justify-center gap-2 bg-muted text-foreground py-3 px-4 rounded-lg font-medium hover:bg-muted/80 transition-colors",children:[e.jsx(a.ExternalLink,{className:"h-4 w-4"}),"Voir sur TMDB"]}),e.jsxs("button",{onClick:n,className:"w-full flex items-center justify-center gap-2 border border-destructive/30 text-destructive hover:bg-destructive/10 py-3 px-4 rounded-lg font-medium transition-colors",children:[e.jsx(a.Trash2,{className:"h-4 w-4"}),"Retirer des favoris"]})]})]})})]})})}function de({onClose:t,onAdd:r}){const[n,i]=u.useState(""),[o,m]=u.useState([]),[x,v]=u.useState(!1),b=async c=>{if(c.preventDefault(),!n.trim())return;v(!0);const N=await T.search(n);m(N),v(!1)};return e.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-card border shadow-lg rounded-xl w-full max-w-3xl max-h-[80vh] flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b flex items-center gap-4",children:[e.jsx(a.Search,{className:"h-5 w-5 text-muted-foreground"}),e.jsx("form",{onSubmit:b,className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Rechercher une série...",className:"w-full bg-transparent outline-none text-lg",value:n,onChange:c=>i(c.target.value),autoFocus:!0})}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-muted rounded-full",children:e.jsx(a.X,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"flex-1 overflow-auto p-4",children:x?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-muted-foreground",children:[e.jsx(a.Loader2,{className:"h-8 w-8 animate-spin mb-2"}),"Recherche..."]}):o.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-2",children:o.map(c=>e.jsxs("div",{className:"flex items-center gap-4 p-2 hover:bg-muted rounded-lg transition-colors group",children:[e.jsx("div",{className:"h-16 w-12 bg-muted rounded overflow-hidden flex-shrink-0",children:c.poster_path?e.jsx("img",{src:`https://image.tmdb.org/t/p/w92${c.poster_path}`,alt:"",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-muted-foreground/20",children:e.jsx(a.Clapperboard,{className:"h-6 w-6 text-muted-foreground"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium truncate",children:c.name}),e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:c.first_air_date?.split("-")[0]})]}),e.jsx("button",{onClick:()=>r(c),className:"opacity-0 group-hover:opacity-100 p-2 bg-primary text-primary-foreground rounded-full transition-all",children:e.jsx(a.Plus,{className:"h-4 w-4"})})]},c.id))}):n&&!x?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:['Aucun résultat pour "',n,'"']}):e.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"Commencez à taper pour rechercher une série"})})]})})}function ue(){return e.jsxs("div",{className:"space-y-4",children:[e.jsx(me,{}),e.jsx(fe,{})]})}function me(){const[t,r]=u.useState(!1),[n,i]=u.useState(""),[o,m]=u.useState("idle"),[x,v]=u.useState(""),[b,c]=u.useState(!1);u.useEffect(()=>{(async()=>{const y=await window.electronAPI.getCredentials("tmdb_apikey");y&&(i(y),c(!0))})()},[]);const N=async()=>{m("loading"),v("");try{await T.testConnection(n)?(await window.electronAPI.saveCredentials("tmdb_apikey",n),m("success"),v("Clé API valide et sauvegardée"),c(!0)):(m("error"),v("Clé API invalide"),c(!1))}catch{m("error"),v("Erreur lors du test de connexion"),c(!1)}};return t?e.jsxs("div",{className:"rounded-lg border bg-card shadow-sm overflow-hidden transition-all",children:[e.jsxs("div",{onClick:()=>r(!1),className:"flex items-center justify-between p-4 border-b bg-muted/30 cursor-pointer hover:bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:e.jsx(a.Clapperboard,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"TMDB"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"The Movie Database API"})]})]}),e.jsx(a.ChevronDown,{className:"h-5 w-5 text-muted-foreground"})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Clé API (v3)"}),e.jsx("input",{type:"password",value:n,onChange:f=>i(f.target.value),className:"w-full rounded-md border bg-background px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Votre clé API TMDB"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Nécessaire pour récupérer les images et infos des séries.",e.jsxs("a",{href:"https://www.themoviedb.org/settings/api",target:"_blank",rel:"noreferrer",className:"flex items-center gap-1 text-primary hover:underline mt-1 w-fit",children:["Obtenir ma clé API ",e.jsx(a.ExternalLink,{className:"h-3 w-3"})]})]})]}),x&&e.jsxs("div",{className:`flex items-center gap-2 rounded-md p-3 text-sm ${o==="success"?"bg-green-500/10 text-green-500":"bg-destructive/10 text-destructive"}`,children:[o==="success"?e.jsx(a.Check,{className:"h-4 w-4"}):e.jsx(a.AlertCircle,{className:"h-4 w-4"}),x]}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsxs("button",{onClick:N,disabled:o==="loading",className:"flex items-center gap-2 rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90 disabled:opacity-50",children:[o==="loading"?e.jsx(a.Loader2,{className:"h-4 w-4 animate-spin"}):e.jsx(a.Save,{className:"h-4 w-4"}),"Sauvegarder"]})})]})]}):e.jsxs("div",{onClick:()=>r(!0),className:"flex items-center justify-between rounded-lg border bg-card p-4 shadow-sm hover:bg-accent/50 cursor-pointer transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:e.jsx(a.Clapperboard,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"TMDB"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Source d'informations pour les séries"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[b?e.jsxs("div",{className:"flex items-center gap-2 text-green-500 text-sm font-medium",children:[e.jsx(a.Check,{className:"h-4 w-4"})," Configuré"]}):e.jsx("div",{className:"flex items-center gap-2 text-muted-foreground text-sm",children:"Non configuré"}),e.jsx(a.ChevronRight,{className:"h-5 w-5 text-muted-foreground"})]})]})}function fe(){const[t,r]=u.useState(!1),[n,i]=u.useState(""),[o,m]=u.useState(""),[x,v]=u.useState(""),[b,c]=u.useState("idle"),[N,f]=u.useState("");u.useEffect(()=>{(async()=>{const S=await window.electronAPI.getCredentials("pushover_user"),C=await window.electronAPI.getCredentials("pushover_token"),d=await window.electronAPI.getCredentials("discord_webhook");S&&i(S),C&&m(C),d&&v(d)})()},[]);const y=async()=>{c("loading");try{await window.electronAPI.saveCredentials("pushover_user",n),await window.electronAPI.saveCredentials("pushover_token",o),await window.electronAPI.saveCredentials("discord_webhook",x),c("success"),f("Configuration sauvegardée"),setTimeout(()=>c("idle"),2e3)}catch{c("error"),f("Erreur de sauvegarde")}},_=async()=>{if(!n||!o){c("error"),f("Configuration Pushover incomplète");return}c("loading"),await L.testPushover(n,o)?(c("success"),f("Notification Pushover envoyée !")):(c("error"),f("Échec de l'envoi Pushover"))},k=async()=>{if(!x){c("error"),f("Webhook Discord manquant");return}c("loading"),await L.testDiscord(x)?(c("success"),f("Notification Discord envoyée !")):(c("error"),f("Échec de l'envoi Discord"))};return t?e.jsxs("div",{className:"rounded-lg border bg-card shadow-sm overflow-hidden transition-all",children:[e.jsxs("div",{onClick:()=>r(!1),className:"flex items-center justify-between p-4 border-b bg-muted/30 cursor-pointer hover:bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:e.jsx(a.Bell,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Configurer les alertes de changement de statut"})]})]}),e.jsx(a.ChevronDown,{className:"h-5 w-5 text-muted-foreground"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4 border-b pb-6",children:[e.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[e.jsx(a.Bell,{className:"h-4 w-4"})," Pushover"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"User Key"}),e.jsx("input",{type:"password",value:n,onChange:j=>i(j.target.value),className:"w-full rounded-md border bg-background px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Votre clé utilisateur (User Key)"}),e.jsxs("a",{href:"https://pushover.net",target:"_blank",rel:"noreferrer",className:"text-xs text-primary hover:underline flex items-center gap-1 w-fit",children:["Créer un compte Pushover ",e.jsx(a.ExternalLink,{className:"h-3 w-3"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"API Token (Application)"}),e.jsx("input",{type:"password",value:o,onChange:j=>m(j.target.value),className:"w-full rounded-md border bg-background px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Token de l'application (API Token)"}),e.jsxs("a",{href:"https://pushover.net/apps/build",target:"_blank",rel:"noreferrer",className:"text-xs text-primary hover:underline flex items-center gap-1 w-fit",children:["Créer une application Pushover ",e.jsx(a.ExternalLink,{className:"h-3 w-3"})]})]}),e.jsx("button",{onClick:_,className:"text-xs bg-muted hover:bg-muted/80 px-3 py-1 rounded",children:"Tester Pushover"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[e.jsx(a.MessageSquare,{className:"h-4 w-4"})," Discord"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Webhook URL"}),e.jsx("input",{type:"password",value:x,onChange:j=>v(j.target.value),className:"w-full rounded-md border bg-background px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"https://discord.com/api/webhooks/..."})]}),e.jsx("button",{onClick:k,className:"text-xs bg-muted hover:bg-muted/80 px-3 py-1 rounded",children:"Tester Discord"})]}),N&&e.jsxs("div",{className:`flex items-center gap-2 rounded-md p-3 text-sm ${b==="success"?"bg-green-500/10 text-green-500":b==="error"?"bg-destructive/10 text-destructive":"bg-muted text-muted-foreground"}`,children:[b==="loading"?e.jsx(a.Loader2,{className:"h-4 w-4 animate-spin"}):b==="success"?e.jsx(a.Check,{className:"h-4 w-4"}):e.jsx(a.AlertCircle,{className:"h-4 w-4"}),N]}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsxs("button",{onClick:y,disabled:b==="loading",className:"flex items-center gap-2 rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90 disabled:opacity-50",children:[b==="loading"?e.jsx(a.Loader2,{className:"h-4 w-4 animate-spin"}):e.jsx(a.Save,{className:"h-4 w-4"}),"Sauvegarder tout"]})})]})]}):e.jsxs("div",{onClick:()=>r(!0),className:"flex items-center justify-between rounded-lg border bg-card p-4 shadow-sm hover:bg-accent/50 cursor-pointer transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:e.jsx(a.Bell,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pushover & Discord"})]})]}),e.jsx(a.ChevronRight,{className:"h-5 w-5 text-muted-foreground"})]})}return{manifest:{id:"series",name:"Mes Séries",version:"1.0.0",description:"Suivi de séries TV avec intégration TMDB et Prowlarr",author:"MoowGlax",main:"index.tsx",icon:"Tv",permissions:["tmdb","prowlarr","notifications"]},routes:[{path:"/series",element:e.jsx(le,{})}],sidebarItems:[{id:"series",label:"Séries",icon:a.Clapperboard,path:"/series",order:3}],settings:ue,services:[{id:"series",implementation:w}]}}));
