(function(r,c){typeof exports=="object"&&typeof module<"u"?module.exports=c(require("lucide-react"),require("react"),require("sonner"),require("react-router-dom")):typeof define=="function"&&define.amd?define(["lucide-react","react","sonner","react-router-dom"],c):(r=typeof globalThis<"u"?globalThis:r||self,r.series=c(r.LucideReact,r.React,r.Sonner,r.ReactRouterDOM))})(this,(function(r,c,_,I){"use strict";var P={exports:{}},b={};var E;function $(){if(E)return b;E=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function a(i,n,d){var u=null;if(d!==void 0&&(u=""+d),n.key!==void 0&&(u=""+n.key),"key"in n){d={};for(var x in n)x!=="key"&&(d[x]=n[x])}else d=n;return n=d.ref,{$$typeof:s,type:i,key:u,ref:n!==void 0?n:null,props:d}}return b.Fragment=t,b.jsx=a,b.jsxs=a,b}var F;function L(){return F||(F=1,P.exports=$()),P.exports}var e=L();let N="";const j={init:async()=>{N=await window.electronAPI.getCredentials("tmdb_apikey")||""},testConnection:async s=>{try{return(await(await fetch(`https://api.themoviedb.org/3/authentication/token/new?api_key=${s}`)).json()).success===!0}catch(t){return console.error("TMDB connection test failed",t),!1}},search:async s=>{if(await j.init(),!N)return[];try{return(await(await fetch(`https://api.themoviedb.org/3/search/tv?api_key=${N}&language=fr-FR&query=${encodeURIComponent(s)}&page=1&include_adult=false`)).json()).results||[]}catch(t){return console.error("TMDB search failed",t),[]}},getDetails:async s=>{if(await j.init(),!N)return null;try{return await(await fetch(`https://api.themoviedb.org/3/tv/${s}?api_key=${N}&language=fr-FR`)).json()}catch(t){return console.error("TMDB details failed",t),null}}},T={testPushover:async(s,t)=>{try{const a=new FormData;return a.append("token",t),a.append("user",s),a.append("message","Test de notification MG Tools"),a.append("title","MG Tools"),(await(await fetch("https://api.pushover.net/1/messages.json",{method:"POST",body:a})).json()).status===1}catch(a){return console.error("Pushover test failed",a),!1}},testDiscord:async s=>{try{return(await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:"Test de notification MG Tools",username:"MG Tools"})})).ok}catch(t){return console.error("Discord webhook test failed",t),!1}},sendNotification:async(s,t)=>{const a=await window.electronAPI.getCredentials("pushover_user"),i=await window.electronAPI.getCredentials("pushover_token"),n=await window.electronAPI.getCredentials("discord_webhook");if(a&&i)try{const d=new FormData;d.append("token",i),d.append("user",a),d.append("message",t),d.append("title",s),fetch("https://api.pushover.net/1/messages.json",{method:"POST",body:d}).catch(console.error)}catch(d){console.error(d)}if(n)try{fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({embeds:[{title:s,description:t,color:65280,footer:{text:"MG Tools"},timestamp:new Date().toISOString()}]})}).catch(console.error)}catch(d){console.error(d)}}},M="favorite_series",O="mg_tools_favorite_series",p={getFavorites:async()=>{const s=await window.electronAPI.getData(M);let t=Array.isArray(s)?s:[];if(t.length===0){const a=localStorage.getItem(O);if(a)try{t=JSON.parse(a),await p.saveFavorites(t)}catch{t=[]}else t=[]}return t},saveFavorites:async s=>{await window.electronAPI.saveData(M,s)},addFavorite:async s=>{const t=await p.getFavorites();t.find(a=>a.id===s)||(t.push({id:s}),await p.saveFavorites(t))},removeFavorite:async s=>{const a=(await p.getFavorites()).filter(i=>i.id!==s);await p.saveFavorites(a)},getFavoritesDetails:async()=>{const t=(await p.getFavorites()).map(i=>j.getDetails(i.id));return(await Promise.all(t)).filter(i=>i!==null)},checkStatusChanges:async()=>{const s=await p.getFavorites();let t=!1;const a=await Promise.all(s.map(async i=>{const n=await j.getDetails(i.id);return n?i.lastStatus?(i.lastStatus!==n.status&&(await T.sendNotification(`Changement de statut : ${n.name}`,`La série ${n.name} est passée de "${i.lastStatus}" à "${n.status}".`),i.lastStatus=n.status,i.name=n.name,t=!0),i.name||(i.name=n.name,t=!0),i):(i.lastStatus!==n.status&&(i.lastStatus=n.status,i.name=n.name,t=!0),i):i}));return t&&(await p.saveFavorites(a),localStorage.setItem("series_has_updates","true")),t},hasUpdates:()=>localStorage.getItem("series_has_updates")==="true",clearUpdates:()=>{localStorage.removeItem("series_has_updates")}},A=s=>({Ended:"Terminée","Returning Series":"En cours",Canceled:"Annulée","In Production":"En production",Pilot:"Pilote",Planned:"Programmée"})[s]||s,B=[{id:"all",label:"Toutes"},{id:"returning",label:"En cours"},{id:"ended",label:"Terminées"},{id:"planned",label:"Programmées"}];function q(){const s=I.useNavigate(),[t,a]=c.useState([]),[i,n]=c.useState(!0),[d,u]=c.useState(!1),[x,h]=c.useState(null),[o,g]=c.useState("all"),[m,v]=c.useState(null),[k,w]=c.useState(!1),f=async(l=!0)=>{l?n(!0):w(!0);try{if(await j.init(),!await window.electronAPI.getCredentials("tmdb_apikey")){h(!1),n(!1),w(!1);return}h(!0);const D=await p.getFavoritesDetails();a(D)}catch{_.toast.error("Erreur lors du chargement des séries")}finally{n(!1),w(!1)}};c.useEffect(()=>{f(),p.clearUpdates()},[]);const S=async(l,C)=>{confirm(`Supprimer ${C} des favoris ?`)&&(await p.removeFavorite(l),a(D=>D.filter(K=>K.id!==l)),_.toast.success(`${C} retiré des favoris`),m?.id===l&&v(null))},y=t.filter(l=>o==="all"?!0:o==="ended"?l.status==="Ended"||l.status==="Canceled":o==="returning"?l.status==="Returning Series":o==="planned"?l.status==="Planned"||l.status==="In Production":!0);return e.jsxs("div",{className:"p-8 space-y-6 h-full flex flex-col",children:[e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(r.Clapperboard,{className:"h-6 w-6"}),"Mes Séries"]}),e.jsx("span",{className:"bg-muted px-2 py-0.5 rounded-full text-xs font-medium text-muted-foreground",children:t.length})]}),e.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2 md:pb-0",children:[e.jsx("div",{className:"flex bg-muted p-1 rounded-lg mr-2",children:B.map(l=>e.jsx("button",{onClick:()=>g(l.id),className:`px-3 py-1 text-sm font-medium rounded-md transition-all ${o===l.id?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:l.label},l.id))}),e.jsx("button",{onClick:()=>f(!1),disabled:k,className:`p-2 rounded-md hover:bg-muted transition-colors ${k?"animate-spin":""}`,title:"Rafraîchir",children:e.jsx(r.RefreshCw,{className:"h-4 w-4"})}),e.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90 whitespace-nowrap",children:[e.jsx(r.Plus,{className:"h-4 w-4"})," Ajouter"]})]})]}),e.jsx("div",{className:"flex-1 overflow-auto",children:i?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx(r.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):x===!1?e.jsxs("div",{className:"flex h-full flex-col items-center justify-center text-muted-foreground gap-4",children:[e.jsx(r.Clapperboard,{className:"h-16 w-16 opacity-20"}),e.jsx("p",{children:"La clé API TMDB n'est pas configurée."}),e.jsxs("button",{onClick:()=>s("/settings",{state:{section:"tmdb"}}),className:"flex items-center gap-2 rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90",children:[e.jsx(r.Settings,{className:"h-4 w-4"})," Configurer TMDB"]})]}):y.length===0?e.jsxs("div",{className:"flex h-full flex-col items-center justify-center text-muted-foreground gap-4",children:[e.jsx(r.Clapperboard,{className:"h-16 w-16 opacity-20"}),e.jsx("p",{children:t.length===0?"Aucune série suivie pour le moment.":"Aucune série ne correspond à ce filtre."}),t.length===0&&e.jsx("button",{onClick:()=>u(!0),className:"text-primary hover:underline",children:"Ajouter ma première série"})]}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-6",children:y.map(l=>e.jsxs("div",{onClick:()=>v(l),className:"group relative aspect-[2/3] bg-muted rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-all cursor-pointer border border-transparent hover:border-primary/50",children:[l.poster_path?e.jsx("img",{src:`https://image.tmdb.org/t/p/w500${l.poster_path}`,alt:l.name,className:"w-full h-full object-cover transition-transform group-hover:scale-105"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-muted text-muted-foreground",children:e.jsx(r.Clapperboard,{className:"h-12 w-12"})}),e.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex flex-col justify-end p-4",children:[e.jsx("h3",{className:"text-white font-bold truncate",children:l.name}),e.jsxs("div",{className:"text-white/80 text-xs flex flex-col gap-1 mt-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(r.Star,{className:"h-3 w-3 text-yellow-400 fill-yellow-400"}),e.jsx("span",{children:l.vote_average.toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(r.Info,{className:"h-3 w-3"}),e.jsx("span",{children:A(l.status)})]})]})]}),e.jsx("div",{className:"absolute top-2 right-2 px-2 py-1 rounded bg-black/60 backdrop-blur-sm text-[10px] font-medium text-white",children:l.next_episode_to_air?"Nouveau":A(l.status)})]},l.id))})}),d&&e.jsx(G,{onClose:()=>u(!1),onAdd:async l=>{await p.addFavorite(l.id),f(!1),u(!1),_.toast.success(`${l.name} ajouté aux favoris`)}}),m&&e.jsx(U,{show:m,onClose:()=>v(null),onRemove:()=>S(m.id,m.name)})]})}function U({show:s,onClose:t,onRemove:a}){const i=I.useNavigate(),n=()=>{i("/prowlarr",{state:{search:s.name}})};return e.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-card border shadow-2xl rounded-xl w-full max-w-4xl max-h-[90vh] flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"relative h-48 md:h-64 bg-muted shrink-0",children:[s.backdrop_path?e.jsx("img",{src:`https://image.tmdb.org/t/p/original${s.backdrop_path}`,alt:"",className:"w-full h-full object-cover opacity-50"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-primary/20 to-background"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-card to-transparent"}),e.jsx("button",{onClick:t,className:"absolute top-4 right-4 z-10 p-2 bg-black/20 hover:bg-black/40 text-white rounded-full backdrop-blur-md transition-colors cursor-pointer",children:e.jsx(r.X,{className:"h-5 w-5"})}),e.jsxs("div",{className:"absolute bottom-0 left-0 p-6 flex items-end gap-6 w-full",children:[e.jsx("div",{className:"hidden md:block w-32 aspect-[2/3] rounded-lg overflow-hidden shadow-lg border-2 border-card bg-muted shrink-0 translate-y-8",children:s.poster_path&&e.jsx("img",{src:`https://image.tmdb.org/t/p/w500${s.poster_path}`,alt:"",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0 pb-2",children:[e.jsx("h2",{className:"text-3xl font-bold truncate text-foreground shadow-black drop-shadow-md",children:s.name}),e.jsxs("div",{className:"flex items-center gap-4 text-sm font-medium text-muted-foreground mt-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(r.Star,{className:"h-4 w-4 text-yellow-500 fill-yellow-500"}),s.vote_average.toFixed(1)]}),e.jsx("span",{children:"•"}),e.jsx("span",{children:s.first_air_date.split("-")[0]}),e.jsx("span",{children:"•"}),e.jsx("span",{className:s.status==="Ended"?"text-red-500":"text-green-500",children:A(s.status)})]})]})]})]}),e.jsx("div",{className:"flex-1 overflow-auto p-6 pt-10 md:pt-6",children:e.jsxs("div",{className:"grid md:grid-cols-[1fr_300px] gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Synopsis"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:s.overview||"Aucun résumé disponible en français."})]}),s.next_episode_to_air&&e.jsxs("div",{className:"bg-primary/5 border border-primary/10 rounded-lg p-4 flex items-start gap-4",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-full shrink-0",children:e.jsx(r.Calendar,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-primary",children:"Prochain épisode"}),e.jsxs("p",{className:"text-sm mt-1",children:["S",s.next_episode_to_air.season_number,"E",s.next_episode_to_air.episode_number," : ",s.next_episode_to_air.name]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Diffusé le ",new Date(s.next_episode_to_air.air_date).toLocaleDateString("fr-FR",{dateStyle:"long"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:s.number_of_seasons}),e.jsx("div",{className:"text-xs text-muted-foreground uppercase tracking-wider",children:"Saisons"})]}),e.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:s.number_of_episodes}),e.jsx("div",{className:"text-xs text-muted-foreground uppercase tracking-wider",children:"Épisodes"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:n,className:"w-full flex items-center justify-center gap-2 bg-primary text-primary-foreground py-3 px-4 rounded-lg font-medium hover:bg-primary/90 transition-colors shadow-sm",children:[e.jsx(r.Search,{className:"h-4 w-4"}),"Rechercher sur Prowlarr"]}),e.jsxs("a",{href:`https://www.themoviedb.org/tv/${s.id}`,target:"_blank",rel:"noreferrer",className:"w-full flex items-center justify-center gap-2 bg-muted text-foreground py-3 px-4 rounded-lg font-medium hover:bg-muted/80 transition-colors",children:[e.jsx(r.ExternalLink,{className:"h-4 w-4"}),"Voir sur TMDB"]}),e.jsxs("button",{onClick:a,className:"w-full flex items-center justify-center gap-2 border border-destructive/30 text-destructive hover:bg-destructive/10 py-3 px-4 rounded-lg font-medium transition-colors",children:[e.jsx(r.Trash2,{className:"h-4 w-4"}),"Retirer des favoris"]})]})]})})]})})}function G({onClose:s,onAdd:t}){const[a,i]=c.useState(""),[n,d]=c.useState([]),[u,x]=c.useState(!1),h=async o=>{if(o.preventDefault(),!a.trim())return;x(!0);const g=await j.search(a);d(g),x(!1)};return e.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-card border shadow-lg rounded-xl w-full max-w-3xl max-h-[80vh] flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b flex items-center gap-4",children:[e.jsx(r.Search,{className:"h-5 w-5 text-muted-foreground"}),e.jsx("form",{onSubmit:h,className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Rechercher une série...",className:"w-full bg-transparent outline-none text-lg",value:a,onChange:o=>i(o.target.value),autoFocus:!0})}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-muted rounded-full",children:e.jsx(r.X,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"flex-1 overflow-auto p-4",children:u?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-muted-foreground",children:[e.jsx(r.Loader2,{className:"h-8 w-8 animate-spin mb-2"}),"Recherche..."]}):n.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-2",children:n.map(o=>e.jsxs("div",{className:"flex items-center gap-4 p-2 hover:bg-muted rounded-lg transition-colors group",children:[e.jsx("div",{className:"h-16 w-12 bg-muted rounded overflow-hidden flex-shrink-0",children:o.poster_path?e.jsx("img",{src:`https://image.tmdb.org/t/p/w92${o.poster_path}`,alt:"",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-muted-foreground/20",children:e.jsx(r.Clapperboard,{className:"h-6 w-6 text-muted-foreground"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium truncate",children:o.name}),e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:o.first_air_date?.split("-")[0]})]}),e.jsx("button",{onClick:()=>t(o),className:"opacity-0 group-hover:opacity-100 p-2 bg-primary text-primary-foreground rounded-full transition-all",children:e.jsx(r.Plus,{className:"h-4 w-4"})})]},o.id))}):a&&!u?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:['Aucun résultat pour "',a,'"']}):e.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"Commencez à taper pour rechercher une série"})})]})})}function J(){return e.jsxs("div",{className:"space-y-4",children:[e.jsx(W,{}),e.jsx(z,{})]})}function W(){const[s,t]=c.useState(!1),[a,i]=c.useState(""),[n,d]=c.useState("idle"),[u,x]=c.useState(""),[h,o]=c.useState(!1);c.useEffect(()=>{(async()=>{const v=await window.electronAPI.getCredentials("tmdb_apikey");v&&(i(v),o(!0))})()},[]);const g=async()=>{d("loading"),x("");try{await j.testConnection(a)?(await window.electronAPI.saveCredentials("tmdb_apikey",a),d("success"),x("Clé API valide et sauvegardée"),o(!0)):(d("error"),x("Clé API invalide"),o(!1))}catch{d("error"),x("Erreur lors du test de connexion"),o(!1)}};return s?e.jsxs("div",{className:"rounded-lg border bg-card shadow-sm overflow-hidden transition-all",children:[e.jsxs("div",{onClick:()=>t(!1),className:"flex items-center justify-between p-4 border-b bg-muted/30 cursor-pointer hover:bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:e.jsx(r.Clapperboard,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"TMDB"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"The Movie Database API"})]})]}),e.jsx(r.ChevronDown,{className:"h-5 w-5 text-muted-foreground"})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Clé API (v3)"}),e.jsx("input",{type:"password",value:a,onChange:m=>i(m.target.value),className:"w-full rounded-md border bg-background px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Votre clé API TMDB"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Nécessaire pour récupérer les images et infos des séries.",e.jsxs("a",{href:"https://www.themoviedb.org/settings/api",target:"_blank",rel:"noreferrer",className:"flex items-center gap-1 text-primary hover:underline mt-1 w-fit",children:["Obtenir ma clé API ",e.jsx(r.ExternalLink,{className:"h-3 w-3"})]})]})]}),u&&e.jsxs("div",{className:`flex items-center gap-2 rounded-md p-3 text-sm ${n==="success"?"bg-green-500/10 text-green-500":"bg-destructive/10 text-destructive"}`,children:[n==="success"?e.jsx(r.Check,{className:"h-4 w-4"}):e.jsx(r.AlertCircle,{className:"h-4 w-4"}),u]}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsxs("button",{onClick:g,disabled:n==="loading",className:"flex items-center gap-2 rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90 disabled:opacity-50",children:[n==="loading"?e.jsx(r.Loader2,{className:"h-4 w-4 animate-spin"}):e.jsx(r.Save,{className:"h-4 w-4"}),"Sauvegarder"]})})]})]}):e.jsxs("div",{onClick:()=>t(!0),className:"flex items-center justify-between rounded-lg border bg-card p-4 shadow-sm hover:bg-accent/50 cursor-pointer transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:e.jsx(r.Clapperboard,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"TMDB"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Source d'informations pour les séries"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[h?e.jsxs("div",{className:"flex items-center gap-2 text-green-500 text-sm font-medium",children:[e.jsx(r.Check,{className:"h-4 w-4"})," Configuré"]}):e.jsx("div",{className:"flex items-center gap-2 text-muted-foreground text-sm",children:"Non configuré"}),e.jsx(r.ChevronRight,{className:"h-5 w-5 text-muted-foreground"})]})]})}function z(){const[s,t]=c.useState(!1),[a,i]=c.useState(""),[n,d]=c.useState(""),[u,x]=c.useState(""),[h,o]=c.useState("idle"),[g,m]=c.useState("");c.useEffect(()=>{(async()=>{const S=await window.electronAPI.getCredentials("pushover_user"),y=await window.electronAPI.getCredentials("pushover_token"),l=await window.electronAPI.getCredentials("discord_webhook");S&&i(S),y&&d(y),l&&x(l)})()},[]);const v=async()=>{o("loading");try{await window.electronAPI.saveCredentials("pushover_user",a),await window.electronAPI.saveCredentials("pushover_token",n),await window.electronAPI.saveCredentials("discord_webhook",u),o("success"),m("Configuration sauvegardée"),setTimeout(()=>o("idle"),2e3)}catch{o("error"),m("Erreur de sauvegarde")}},k=async()=>{if(!a||!n){o("error"),m("Configuration Pushover incomplète");return}o("loading"),await T.testPushover(a,n)?(o("success"),m("Notification Pushover envoyée !")):(o("error"),m("Échec de l'envoi Pushover"))},w=async()=>{if(!u){o("error"),m("Webhook Discord manquant");return}o("loading"),await T.testDiscord(u)?(o("success"),m("Notification Discord envoyée !")):(o("error"),m("Échec de l'envoi Discord"))};return s?e.jsxs("div",{className:"rounded-lg border bg-card shadow-sm overflow-hidden transition-all",children:[e.jsxs("div",{onClick:()=>t(!1),className:"flex items-center justify-between p-4 border-b bg-muted/30 cursor-pointer hover:bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:e.jsx(r.Bell,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Configurer les alertes de changement de statut"})]})]}),e.jsx(r.ChevronDown,{className:"h-5 w-5 text-muted-foreground"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4 border-b pb-6",children:[e.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[e.jsx(r.Bell,{className:"h-4 w-4"})," Pushover"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"User Key"}),e.jsx("input",{type:"password",value:a,onChange:f=>i(f.target.value),className:"w-full rounded-md border bg-background px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Votre clé utilisateur (User Key)"}),e.jsxs("a",{href:"https://pushover.net",target:"_blank",rel:"noreferrer",className:"text-xs text-primary hover:underline flex items-center gap-1 w-fit",children:["Créer un compte Pushover ",e.jsx(r.ExternalLink,{className:"h-3 w-3"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"API Token (Application)"}),e.jsx("input",{type:"password",value:n,onChange:f=>d(f.target.value),className:"w-full rounded-md border bg-background px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Token de l'application (API Token)"}),e.jsxs("a",{href:"https://pushover.net/apps/build",target:"_blank",rel:"noreferrer",className:"text-xs text-primary hover:underline flex items-center gap-1 w-fit",children:["Créer une application Pushover ",e.jsx(r.ExternalLink,{className:"h-3 w-3"})]})]}),e.jsx("button",{onClick:k,className:"text-xs bg-muted hover:bg-muted/80 px-3 py-1 rounded",children:"Tester Pushover"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[e.jsx(r.MessageSquare,{className:"h-4 w-4"})," Discord"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Webhook URL"}),e.jsx("input",{type:"password",value:u,onChange:f=>x(f.target.value),className:"w-full rounded-md border bg-background px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"https://discord.com/api/webhooks/..."})]}),e.jsx("button",{onClick:w,className:"text-xs bg-muted hover:bg-muted/80 px-3 py-1 rounded",children:"Tester Discord"})]}),g&&e.jsxs("div",{className:`flex items-center gap-2 rounded-md p-3 text-sm ${h==="success"?"bg-green-500/10 text-green-500":h==="error"?"bg-destructive/10 text-destructive":"bg-muted text-muted-foreground"}`,children:[h==="loading"?e.jsx(r.Loader2,{className:"h-4 w-4 animate-spin"}):h==="success"?e.jsx(r.Check,{className:"h-4 w-4"}):e.jsx(r.AlertCircle,{className:"h-4 w-4"}),g]}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsxs("button",{onClick:v,disabled:h==="loading",className:"flex items-center gap-2 rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90 disabled:opacity-50",children:[h==="loading"?e.jsx(r.Loader2,{className:"h-4 w-4 animate-spin"}):e.jsx(r.Save,{className:"h-4 w-4"}),"Sauvegarder tout"]})})]})]}):e.jsxs("div",{onClick:()=>t(!0),className:"flex items-center justify-between rounded-lg border bg-card p-4 shadow-sm hover:bg-accent/50 cursor-pointer transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:e.jsx(r.Bell,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pushover & Discord"})]})]}),e.jsx(r.ChevronRight,{className:"h-5 w-5 text-muted-foreground"})]})}return{manifest:{id:"series",name:"Mes Séries",version:"1.0.0",description:"Suivi de séries TV avec intégration TMDB et Prowlarr",author:"MoowGlax",main:"index.tsx",icon:"Tv",permissions:["tmdb","prowlarr","notifications"]},routes:[{path:"/series",element:e.jsx(q,{})}],sidebarItems:[{id:"series",label:"Séries",icon:r.Clapperboard,path:"/series",order:3}],settings:J,services:[{id:"series",implementation:p}]}}));
