(function(t,a){typeof exports=="object"&&typeof module<"u"?module.exports=a(require("lucide-react"),require("react"),require("sonner")):typeof define=="function"&&define.amd?define(["lucide-react","react","sonner"],a):(t=typeof globalThis<"u"?globalThis:t||self,t.youtubetomp3=a(t.LucideReact,t.React,t.Sonner))})(this,(function(t,a,y){"use strict";var h={exports:{}},u={};var j;function M(){if(j)return u;j=1;var l=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function x(p,o,n){var m=null;if(n!==void 0&&(m=""+n),o.key!==void 0&&(m=""+o.key),"key"in o){n={};for(var i in o)i!=="key"&&(n[i]=o[i])}else n=o;return o=n.ref,{$$typeof:l,type:p,key:m,ref:o!==void 0?o:null,props:n}}return u.Fragment=s,u.jsx=x,u.jsxs=x,u}var w;function T(){return w||(w=1,h.exports=M()),h.exports}var e=T();const C=a.createContext(void 0);function S(){const l=a.useContext(C);if(l===void 0)throw new Error("useDownload must be used within a DownloadProvider");return l}function I(){const{isDownloading:l,progress:s,videoInfo:x,startDownload:p,cancelDownload:o}=S(),[n,m]=a.useState(""),[i,v]=a.useState(!1),[D,N]=a.useState(null),[f,g]=a.useState("Vérification des composants..."),[b,k]=a.useState("mp3"),[P,E]=a.useState("best"),r=l&&x?x:D;a.useEffect(()=>{(async()=>{try{const d=window.electronAPI.youtube.onBinaryProgress(q=>{g(q)});await window.electronAPI.youtube.checkBinaries();const V=await window.electronAPI.youtube.getBinariesPath();console.log("Binaries path:",V),g(null),d()}catch(d){console.error(d),g("Erreur lors du chargement des composants."),y.toast.error("Impossible de charger les composants nécessaires.")}})()},[]);const Y=async c=>{if(c.preventDefault(),!!n.trim()){v(!0),N(null);try{const d=await window.electronAPI.youtube.getInfo(n);N(d)}catch(d){console.error(d),y.toast.error("Impossible de récupérer les infos de la vidéo.")}finally{v(!1)}}},A=async()=>{r&&(l||await p(n,{format:b,quality:P},r))},L=()=>{window.electronAPI.youtube.openDownloads().catch(console.error)};return e.jsxs("div",{className:"p-8 max-w-5xl mx-auto space-y-8 animate-in fade-in duration-500",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-red-500/10 rounded-xl",children:e.jsx(t.Youtube,{className:"w-8 h-8 text-red-500"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"YouTube Downloader"}),e.jsx("p",{className:"text-gray-400",children:"MP3, MP4 et Playlists"}),f&&e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-yellow-500 animate-pulse",children:[e.jsx(t.Loader2,{className:"w-4 h-4 animate-spin"}),f]})]})]}),e.jsxs("button",{onClick:L,className:"p-3 bg-gray-800 hover:bg-gray-700 text-gray-300 rounded-xl transition-colors flex items-center gap-2 border border-gray-700",title:"Ouvrir le dossier de téléchargement",children:[e.jsx(t.FolderOpen,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Ouvrir dossier"})]})]}),e.jsx("div",{className:"bg-gray-900/50 p-6 rounded-2xl border border-gray-800 shadow-xl backdrop-blur-sm",children:e.jsxs("form",{onSubmit:Y,className:"relative flex gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(t.Search,{className:"h-5 w-5 text-gray-500"})}),e.jsx("input",{type:"text",value:n,onChange:c=>m(c.target.value),className:"block w-full pl-11 pr-4 py-4 bg-gray-950 border border-gray-800 rounded-xl text-gray-100 placeholder-gray-500 focus:border-red-500/50 focus:ring-1 focus:ring-red-500/50 focus:outline-none transition-all",placeholder:"Collez un lien YouTube (Vidéo ou Playlist)..."})]}),e.jsx("button",{type:"submit",disabled:i||!n||!!f,className:"px-8 py-4 bg-red-600 hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed text-white font-medium rounded-xl transition-colors flex items-center gap-2 min-w-[140px] justify-center shadow-lg shadow-red-900/20",children:i?e.jsx(t.Loader2,{className:"w-5 h-5 animate-spin"}):"Rechercher"})]})}),r&&e.jsx("div",{className:"bg-gray-800/40 rounded-2xl border border-gray-700/50 overflow-hidden animate-in slide-in-from-bottom-4 duration-500",children:e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsxs("div",{className:"md:w-80 h-56 relative group bg-black/50 flex-shrink-0",children:[r.thumbnail?e.jsx("img",{src:r.thumbnail,alt:r.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-600",children:e.jsx(t.Music,{className:"w-16 h-16"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end p-4",children:e.jsx("span",{className:"text-white text-sm font-medium bg-red-600 px-2 py-1 rounded",children:r.duration})}),r.isPlaylist&&e.jsxs("div",{className:"absolute top-2 right-2 bg-black/70 backdrop-blur-sm text-white px-3 py-1 rounded-full text-xs font-medium flex items-center gap-2 border border-white/10",children:[e.jsx(t.ListVideo,{className:"w-3 h-3"}),"Playlist (",r.playlistCount,")"]})]}),e.jsxs("div",{className:"p-6 flex flex-col justify-between flex-1 gap-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white line-clamp-2 mb-2 leading-tight",children:r.title}),e.jsxs("p",{className:"text-gray-400 font-medium flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-full bg-gray-700 flex items-center justify-center text-xs",children:r.author.substring(0,2).toUpperCase()}),r.author]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-xs text-gray-500 font-medium uppercase tracking-wider flex items-center gap-1",children:[e.jsx(t.Settings2,{className:"w-3 h-3"})," Format"]}),e.jsxs("div",{className:"flex bg-gray-900/50 p-1 rounded-lg border border-gray-700/50",children:[e.jsxs("button",{onClick:()=>k("mp3"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-md text-sm font-medium transition-all ${b==="mp3"?"bg-red-600 text-white shadow-lg":"text-gray-400 hover:text-white"}`,children:[e.jsx(t.Music,{className:"w-4 h-4"})," MP3"]}),e.jsxs("button",{onClick:()=>k("mp4"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-md text-sm font-medium transition-all ${b==="mp4"?"bg-red-600 text-white shadow-lg":"text-gray-400 hover:text-white"}`,children:[e.jsx(t.Video,{className:"w-4 h-4"})," MP4"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs text-gray-500 font-medium uppercase tracking-wider flex items-center gap-1",children:"Qualité"}),e.jsxs("select",{value:P,onChange:c=>E(c.target.value),className:"w-full bg-gray-900/50 border border-gray-700/50 text-gray-200 text-sm rounded-lg focus:ring-red-500 focus:border-red-500 block p-2.5 outline-none",children:[e.jsx("option",{value:"best",children:"Meilleure (320k / HD)"}),e.jsx("option",{value:"high",children:"Haute (192k / 720p)"}),e.jsx("option",{value:"medium",children:"Moyenne (128k / 480p)"}),e.jsx("option",{value:"low",children:"Basse (64k / 360p)"})]})]})]}),e.jsx("div",{className:"space-y-4",children:l?e.jsxs("div",{className:"bg-gray-900/50 p-4 rounded-xl border border-gray-700/50 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-end text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-white font-medium",children:[e.jsx(t.Loader2,{className:"w-4 h-4 animate-spin text-red-500"}),e.jsx("span",{children:s.total&&s.total>1?"Téléchargement de la playlist...":"Téléchargement en cours..."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-red-400 font-bold",children:[Math.round(s.total&&s.total>1?((s.current||1)-1)/s.total*100+s.percent/s.total:s.percent),"%"]}),e.jsx("button",{onClick:o,className:"p-1 hover:bg-white/10 rounded-full transition-colors text-gray-400 hover:text-white",title:"Annuler le téléchargement",children:e.jsx(t.X,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"h-2.5 w-full bg-gray-700 rounded-full overflow-hidden shadow-inner",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-red-600 to-red-500 transition-all duration-300 ease-out",style:{width:`${s.total&&s.total>1?((s.current||1)-1)/s.total*100+s.percent/s.total:s.percent}%`}})}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 font-medium",children:[e.jsx("span",{children:s.total&&s.total>1?`Vidéo ${s.current} sur ${s.total}`:"Traitement en cours..."}),s.eta&&e.jsxs("span",{children:["Temps restant : ",e.jsx("span",{className:"text-gray-300",children:s.eta})]})]}),s.total&&s.total>1&&e.jsxs("div",{className:"space-y-1 mt-2 pt-2 border-t border-gray-700/30",children:[e.jsxs("div",{className:"flex justify-between text-[10px] text-gray-500 uppercase tracking-wider",children:[e.jsx("span",{children:"Fichier actuel"}),e.jsxs("span",{children:[Math.round(s.percent),"%"]})]}),e.jsx("div",{className:"h-1 w-full bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gray-400 transition-all duration-300 ease-out",style:{width:`${s.percent}%`}})})]})]}):e.jsxs("button",{onClick:A,className:"w-full py-4 bg-white hover:bg-gray-50 text-gray-900 font-bold rounded-xl transition-all flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed shadow-xl hover:shadow-2xl active:scale-[0.99]",children:[e.jsx(t.Download,{className:"w-5 h-5"}),e.jsxs("span",{children:["Télécharger ",r.isPlaylist?"la playlist":"maintenant"]})]})})]})]})]})}),!r&&!i&&e.jsxs("div",{className:"grid md:grid-cols-3 gap-6 pt-8",children:[e.jsxs("div",{className:"bg-gray-800/30 p-6 rounded-2xl border border-gray-800 hover:border-red-500/30 transition-colors",children:[e.jsx("div",{className:"w-12 h-12 bg-red-500/10 rounded-xl flex items-center justify-center mb-4",children:e.jsx(t.Music,{className:"w-6 h-6 text-red-500"})}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Haute Qualité Audio"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Conversion en MP3 jusqu'à 320kbps pour une expérience d'écoute optimale."})]}),e.jsxs("div",{className:"bg-gray-800/30 p-6 rounded-2xl border border-gray-800 hover:border-red-500/30 transition-colors",children:[e.jsx("div",{className:"w-12 h-12 bg-red-500/10 rounded-xl flex items-center justify-center mb-4",children:e.jsx(t.ListVideo,{className:"w-6 h-6 text-red-500"})}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Support Playlists"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Téléchargez des playlists entières en un seul clic."})]}),e.jsxs("div",{className:"bg-gray-800/30 p-6 rounded-2xl border border-gray-800 hover:border-red-500/30 transition-colors",children:[e.jsx("div",{className:"w-12 h-12 bg-red-500/10 rounded-xl flex items-center justify-center mb-4",children:e.jsx(t.Video,{className:"w-6 h-6 text-red-500"})}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"MP3 & MP4"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Choisissez entre format audio ou vidéo selon vos besoins."})]})]})]})}return{manifest:{id:"youtubetomp3",name:"Youtube To MP3",version:"1.0.0",description:"Téléchargement de vidéos et playlists YouTube en MP3/MP4",author:"MoowGlax",main:"index.tsx",icon:"Youtube",permissions:["youtube"]},routes:[{path:"/youtube",element:e.jsx(I,{})}],sidebarItems:[{id:"youtube",label:"YouTube",icon:t.Youtube,path:"/youtube",order:4}]}}));
